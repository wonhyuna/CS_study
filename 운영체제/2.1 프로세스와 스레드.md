# 프로세스와 스레드

### 프로세스
![image](https://github.com/wonhyuna/CS_study/assets/68580694/10fd6101-780e-4a8d-a1f8-964868d7ab67)
<br>

- 컴퓨터에서 실행 중인 하나의 프로그램
- 프로그램: 작업을 수행하기 위한 명령어 집합
- OS는 프로그램 **실행**하면서 디스크에 저장된 데이터를 메모리로 
**로드**
- 프로세스는 OS로부터 독립된 메모리 영역을 할당 받으며, 다른 프로세스의 메모리 영역에 접근 X 

#### 프로세스의 메모리 영역 구조
![image](https://github.com/wonhyuna/CS_study/assets/68580694/42b58062-3d93-4e1a-a926-92f0474e7aa1)
<br>

- 코드(텍스트): 실행할 코드가 기계어로 컴파일되어 저장되는 영역
- 데이터: 전역 변수, 정적 변수, 배열, 구조체 등이 저장되는 영역 
  - BSS (Block Stated Symbol) 영역: 초기화하지 않은 변수 저장
  - 데이터 영역: 초기화한 변수 저장
- 힙: 사용자 동적 메모리 할당 영역 ex) C - malloc() 
  - 낮은 주소 값에서 높은 주소 값으로 메모리가 할당되며, 영역 크기는 런타임 때 결정
- 스택: 지역 변수, 함수의 매개변수, 반환되는 주소 값 등이 저장되는 영역
  - 높은 주소 값에서 낮은 주소 값으로 메모리가 할당되며, 영역 크기는 런타임 때 결정

#### 스택과 힙 영역
- 스택 영역과 힙 영역은 동적으로 메모리 할당이 가능해 두 영역 사이에 **빈 메모리 공간**이 존재함
- 방식
  - 스택: LIFO (후입선출) - 높은 주소 값에서 낮은 주소 값 순서로 사용
  - 힙: FIFO (선입선출) - 낮은 주소 값에서 높은 주소 값 순서로 사용
- 침범 (메모리 영역을 서로 공유하다 보니 생기는 문제)
  - 스택 오버플로: 스택 영역이 힙 영역을 침범하는 경우
  - 힙 오버플로: 힙 영역이 스택 영역을 침범하는 경우
    - 오버플로: 메모리 공간에서 할당할 수 있는 최대 범위를 넘어가는 것 <-> 언더플로: 최소 범위보다 작은 것

### 스레드
- 프로세스는 한 개 이상의 스레드를 가짐
- 스레드: 프로세스에서 실제로 실행되는 흐름의 단위
- 프로세스의 메모리 공간을 이용
- 지역 변수를 저장하는 **스택 영역**을 할당받음
- 전역 변수를 저장하는 **힙 영역**은 다른 스레드와 공유함

![image](https://github.com/wonhyuna/CS_study/assets/68580694/db416727-7748-43f2-991f-73be964a1729)
<br>

#### 사용자 레벨 스레드와 커널 레벨 스레드
- 스레드를 관리하는 주체에 따라 구분
- 사용자 레벨 스레드: 사용자가 라이브러리를 이용해 생성 및 관리
- 커널 레벨 스레드: 커널이 스레드를 생성 및 관리

![image](https://github.com/wonhyuna/CS_study/assets/68580694/23fef234-1273-4a37-b216-a615e39bd5e2)
<br>

1. 다대일 모델
- 사용자 (n) - 커널 (1)
- 하나의 커널 레벨 스레드는 하나의 사용자 레벨 스레드만 차지할 수 있으므로 멀티 코어의 병렬성 이용 X

2. 일대일 모델
- 사용자 (1) - 커널 (1) 
- 사용자 레벨 스레드 수만큼 커널 레벨 스레드가 생성되므로 성능 저하

3. 다대다 모델
- 사용자 (n) - 커널 (m) [m <= n]
- 다대일과 일대일 모델의 장점 포함 but 구현 어렵