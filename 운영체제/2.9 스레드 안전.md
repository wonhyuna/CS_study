# 스레드 안전
- 멀티 스레드 환경에서 하나의 변수, 함수, 객체에 스레드 여러 개가 동시에 접근해도 문제가 없음을 의미

### 스레드 안전이 이뤄지지 않는 경우
```
var++;
```
- var 변수의 값을 메모리에서 CPU 레지스터로 로드 -> 연산 처리 -> 연산 결과를 메모리에 작성하는 과정을 거침
- 스레드 2개가 접근하면 잘못된 결과 초래
![image](https://github.com/wonhyuna/CS_study/assets/68580694/0c7dcb5d-8ed4-4ad7-8221-f91edf1d433d)
<br>

### 스레드 안전을 위한 조건
1. 상호배제: 공유 자원에 접근해야 할 때 뮤텍스 또는 세마포어와 같은 상호배제 기법을 사용해 접근을 통제해야 함
2. 원자 연산: 공유 자원에 접근할 때 원자 연산을 이용하거나 원자적으로 정의된 연산을 이용해 연산 도중에 다른 스레드가 접근할 수 없게 함
- 원자 연산: 연산 했다, 안 했다 2가지만 존재하는 연산
3. 재진입성: 특정 함수를 하나의 스레드에서 실행 중일 때 다른 스레드가 해당 함수를 실행해도 각 스레드에 올바른 결과가 나올 수 있게 해야 함
4. 스레드 지역 저장소: 각 스레드에서만 접근할 수 있는 저장소를 사용해서 공유되는 자원을 줄여야 함